<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MediAssist | Patient Intake Form</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        .req { color: var(--color-danger); font-weight: bold; }
    </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="container">
        <a class="navbar-brand" href="/">
            <i class="fas fa-heartbeat"></i>
            <span>MediAssist <small class="text-muted">Check-In</small></span>
        </a>
        <a href="/patient/logout" class="btn btn-outline-secondary btn-sm">
            <i class="fas fa-arrow-left me-1"></i> Exit
        </a>
    </div>
</nav>

<!-- MAIN CONTENT -->
<main class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">

            <!-- HERO -->
            <div class="hero-section">
                <h2 id="heroTitle">
                    <i class="fas fa-clipboard-user me-2"></i>
                    Begin Your Clinical Check-In
                </h2>
                <p id="heroDesc">
                    This pre-visit intake will help your doctor prepare for your appointment. 
                    Please answer honestly and thoroughly.
                </p>
            </div>

            {% if error %}
            <div class="alert alert-danger mb-4">{{ error }}</div>
            {% endif %}

            <!-- LANGUAGE -->
            <div class="d-flex justify-content-end mb-4">
                <div style="max-width: 180px;">
                    <label class="form-label small mb-2">Interface Language:</label>
                    <select class="form-select form-select-sm" id="languageSelect" onchange="switchLanguage(this.value)">
                        <option value="English" selected>ЁЯЗмЁЯЗз English</option>
                        <option value="Hindi">ЁЯЗоЁЯЗ│ рд╣рд┐рдиреНрджреА (Hindi)</option>
                    </select>
                </div>
            </div>

            <!-- FORM -->
            <form action="/patient/submit" method="POST" class="form-card" novalidate>
                <input type="hidden" name="language" id="hiddenLanguage" value="English">

                <div class="row g-3">

                    <!-- DOCTOR -->
                    <div class="col-12">
                        <div class="form-row-label" id="sectionDoctor">ЁЯСитАНтЪХя╕П Select Your Doctor</div>
                    </div>

                    <div class="col-12">
                        <label class="form-label" id="lbl_doctor">Which doctor are you visiting? <span class="req">*</span></label>
                        <select id="selectDoctor" name="doctor_id" class="form-select" required>
                            <option value="">-- Select a Doctor --</option>
                            {% for doctor in doctors %}
                            <option value="{{ doctor.id }}">{{ doctor.name }} - {{ doctor.specialty }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- DEMOGRAPHICS -->
                    <div class="col-12">
                        <div class="form-row-label" id="sectionDemographics">ЁЯСд Personal Information</div>
                    </div>

                    <div class="col-sm-6">
                        <label class="form-label" id="lbl_name">Full Name</label>
                        <input type="text" id="inputName" name="name" class="form-control" placeholder="Enter your full name" required>
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_age">Age <span class="req">*</span></label>
                        <input type="number" id="inputAge" name="age" class="form-control" min="0" max="150" required>
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_gender">Gender</label>
                        <select id="selectGender" name="gender" class="form-select">
                            <option>Female</option>
                            <option>Male</option>
                            <option>Other</option>
                        </select>
                    </div>

                    <!-- VITALS -->
                    <div class="col-12 mt-2">
                        <div class="form-row-label" id="sectionVitals">ЁЯУК Vital Signs</div>
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_temp">Temperature (┬░C)</label>
                        <input type="number" id="inputTemp" name="temperature" class="form-control" min="30" max="45" step="0.1" placeholder="37.0">
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_bp">Blood Pressure (optional)</label>
                        <input type="text" id="inputBP" name="blood_pressure" class="form-control" placeholder="e.g. 120/80">
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_weight">Weight (kg)</label>
                        <input type="number" id="inputWeight" name="weight" class="form-control" min="1" max="500" step="0.1" placeholder="e.g. 70">
                    </div>

                    <div class="col-sm-3">
                        <label class="form-label" id="lbl_height">Height (cm)</label>
                        <input type="number" id="inputHeight" name="height" class="form-control" min="30" max="250" step="0.1" placeholder="e.g. 170">
                    </div>

                    <!-- MEDICAL -->
                    <div class="col-12 mt-2">
                        <div class="form-row-label" id="sectionMedical">тЪХя╕П Medical Information</div>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label" id="lbl_allergies">Allergies <span class="req">*</span></label>
                        <input type="text" id="inputAllergies" name="allergies" class="form-control" required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label" id="lbl_meds">Current Medications <span class="req">*</span></label>
                        <input type="text" id="inputMeds" name="current_medications" class="form-control" required>
                    </div>

                    <!-- SYMPTOMS -->
                    <div class="col-12 mt-2">
                        <div class="form-row-label" id="sectionComplaint">ЁЯПе Chief Complaint</div>
                    </div>

                    <div class="col-12">
                        <label class="form-label" id="lbl_symptoms">Describe Your Symptoms <span class="req">*</span></label>
                        <textarea id="textSymptoms" name="symptoms" class="form-control" rows="5" required></textarea>
                    </div>

                    <div class="col-12">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="1" name="confirm" required>
                            <label class="form-check-label small-muted">I confirm this data is accurate.</label>
                        </div>
                    </div>

                    <!-- SUBMIT -->
                    <div class="col-12 text-center mt-4">
                        <button type="submit" class="btn-medical w-100">
                            <i class="fas fa-wand-magic-sparkles me-2"></i>
                            <span id="btnText">Generate Clinical Summary</span>
                        </button>
                    </div>
                </div>
            </form>

            {% if error %}
            <div class="alert alert-danger mt-4">{{ error }}</div>
            {% endif %}

        </div>
    </div>
</main>

<!-- TRANSLATION SCRIPT -->
<script>
const TRANSLATIONS = {
    'Hindi': {
        'heroTitle': '<i class="fas fa-clipboard-user me-2"></i>рдЕрдкрдиреА рдХреНрд▓рд┐рдирд┐рдХрд▓ рдЪреЗрдХ-рдЗрди рд╢реБрд░реВ рдХрд░реЗрдВ',
        'heroDesc': 'рдпрд╣ рдЗрдирдЯреЗрдХ рдбреЙрдХреНрдЯрд░ рдХреЛ рдЖрдкрдХреА рдореБрд▓рд╛рдХрд╛рдд рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИред',
        'sectionDoctor': 'ЁЯСитАНтЪХя╕П рдЕрдкрдиреЗ рдбреЙрдХреНрдЯрд░ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ',
        'sectionDemographics': 'ЁЯСд рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЬрд╛рдирдХрд╛рд░реА',
        'sectionVitals': 'ЁЯУК рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рдВрдХреЗрдд',
        'sectionMedical': 'тЪХя╕П рдЪрд┐рдХрд┐рддреНрд╕реАрдп рдЬрд╛рдирдХрд╛рд░реА',
        'sectionComplaint': 'ЁЯПе рдореБрдЦреНрдп рд╢рд┐рдХрд╛рдпрдд',

        'lbl_name': 'рдкреВрд░рд╛ рдирд╛рдо',
        'lbl_age': 'рдЙрдореНрд░ <span class="req">*</span>',
        'lbl_gender': 'рд▓рд┐рдВрдЧ',
        'lbl_temp': 'рддрд╛рдкрдорд╛рди (┬░C)',
        'lbl_bp': 'рд░рдХреНрддрдЪрд╛рдк',
        'lbl_allergies': 'рдПрд▓рд░реНрдЬреА <span class="req">*</span>',
        'lbl_meds': 'рд╡рд░реНрддрдорд╛рди рджрд╡рд╛рдПрдВ <span class="req">*</span>',
        'lbl_symptoms': 'рд▓рдХреНрд╖рдг рдмрддрд╛рдПрдВ <span class="req">*</span>',
        'lbl_weight': 'рд╡рдЬрди (рдХрд┐рд▓реЛрдЧреНрд░рд╛рдо)',
        'lbl_height': 'рдХрдж (рд╕реЗрдВрдЯреАрдореАрдЯрд░)',

        'btnText': 'рд╕рд╛рд░рд╛рдВрд╢ рдмрдирд╛рдПрдВ'
    },

    'English': {
        'heroTitle': '<i class="fas fa-clipboard-user me-2"></i>Begin Your Clinical Check-In',
        'heroDesc': 'This intake helps your doctor prepare for your visit.',
        'sectionDoctor': 'ЁЯСитАНтЪХя╕П Select Your Doctor',
        'sectionDemographics': 'ЁЯСд Personal Information',
        'sectionVitals': 'ЁЯУК Vital Signs',
        'sectionMedical': 'тЪХя╕П Medical Information',
        'sectionComplaint': 'ЁЯПе Chief Complaint',

        'lbl_name': 'Full Name',
        'lbl_age': 'Age <span class="req">*</span>',
        'lbl_gender': 'Gender',
        'lbl_temp': 'Temperature (┬░C)',
        'lbl_bp': 'Blood Pressure (optional)',
        'lbl_allergies': 'Allergies <span class="req">*</span>',
        'lbl_meds': 'Current Medications <span class="req">*</span>',
        'lbl_symptoms': 'Describe Your Symptoms <span class="req">*</span>',
        'lbl_weight': 'Weight (kg)',
        'lbl_height': 'Height (cm)',

        'btnText': 'Generate Clinical Summary'
    }
};

function switchLanguage(lang) {
    document.getElementById('hiddenLanguage').value = lang;
    const data = TRANSLATIONS[lang];

    const ids = [
        'heroTitle','heroDesc','sectionDoctor','sectionDemographics','sectionVitals',
        'sectionMedical','sectionComplaint','lbl_name','lbl_age','lbl_gender','lbl_temp',
        'lbl_bp','lbl_allergies','lbl_meds','lbl_symptoms','lbl_weight','lbl_height','btnText'
    ];

    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el && data[id]) el.innerHTML = data[id];
    });

    if (lang === 'Hindi') {
        document.getElementById('inputName').placeholder = 'рдЕрдкрдирд╛ рдкреВрд░рд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ';
        document.getElementById('textSymptoms').placeholder = 'рд▓рдХреНрд╖рдг рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд▓рд┐рдЦреЗрдВ...';
    } else {
        document.getElementById('inputName').placeholder = 'Enter your full name';
        document.getElementById('textSymptoms').placeholder = 'Please describe your symptoms...';
    }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
